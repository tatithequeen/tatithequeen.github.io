<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Labouchere System</title>
    <link rel="stylesheet" type="text/css" href="styles.css">
</head>
<body>
    <body>
    <h2>Labouchere System</h2>
    <p>
        Enter your sequence:
        <input type="text" id="userSequence" placeholder="Enter numbers separated by commas">
        <button onclick="updateSequence()">Update</button>
    </p>
    <p>Your Bet: <span id="currentBet">0</span></p>
    <button class="button1" onclick="onWin()">Win</button>
    <button class="button2" onclick="onLose()">Lose</button>
    <br><br>
    <table border="1" id="resultTable">
        <tr>
            <th>Bet Amount</th>
            <th>Result</th>
            <th>Current Sequence</th>
        </tr>
    </table>

    <script>
        let sequence = [];
        let currentBet = 0;
        let table = document.getElementById('resultTable');
        let currentBetElement = document.getElementById('currentBet');

        function updateTable(bet, result, currentSequence) {
            let newRow = table.insertRow(-1);
            let betCell = newRow.insertCell(0);
            let resultCell = newRow.insertCell(1);
            let sequenceCell = newRow.insertCell(2);

            betCell.textContent = bet;
            resultCell.textContent = result;
            sequenceCell.textContent = currentSequence;
        }

        function calculateNextBet() {
            if (sequence.length === 0) {
                return 0;
            } else if (sequence.length === 1) {
                return sequence[0] * 2;
            } else {
                return sequence[0] + sequence[sequence.length - 1];
            }
        }

        function onWin() {
            let betAmount = currentBet;
            currentBet = calculateNextBet();
            if (sequence.length <= 2) {
                updateSequence();
            } else {
                sequence.shift();
                sequence.pop();
            }
            updateTable(betAmount, 'Win', sequence.join(', '));
            currentBetElement.textContent = currentBet;
        }

        function onLose() {
            let betAmount = currentBet;
            let lostAmount = calculateNextBet();
            sequence.push(lostAmount);
            currentBet = lostAmount;
            updateTable(betAmount, 'Loss', sequence.join(', '));
            currentBetElement.textContent = currentBet;
        }

        function updateSequence() {
            let userInput = document.getElementById('userSequence').value;
            sequence = userInput.split(',').map(item => parseInt(item.trim()));
            currentBet = sequence[0] + sequence[sequence.length - 1];
            currentBetElement.textContent = currentBet;
        }

        function clearTable() {
            let rowCount = table.rows.length;
            for (let i = rowCount - 1; i > 0; i--) {
                table.deleteRow(i);
            }
        }
    </script>
</body>
</html>